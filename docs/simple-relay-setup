Simple Setup
============

You want
--------

- submit mail on stdin by calling masqmail on the commandline
- submit mail with SMTP from the local machine
- let masqmail deliver mail locally to the system mailboxes /var/mail/*
- let masqmail forward non-local mail through a smart host

This is like the simple-local-setup plus the forwarding.
Only the differences are described here.


Configuration
-------------

You need a config file like this one:

    host_name = "foo.example.org"
    query_routes.default = /etc/masqmail/default.route

(Substitute a real hostname, of course.)

Additionally you need to create the config file default.route.
You can derive it from the shipped example.route file.


Check the setup
---------------

Like in simple-local-setup plus ...

Send a mail to a remote location:

    $ echo "some text" | mail foo@somewhereelse.example.org

Check if it is queued:

    $ masqmail -bp

Deliver it with:

    $ masqmail -qo default

Check the queue contents again.

You need to do such queue runs for online routes explicitely. For
instance by cron.


Automatic queue runs
--------------------

You can also tell masqmail to send queued mails through a route each
time the daemon does a queue run. Therefor you need to tell masqmail
that it is online and can use the default route to deliver mail.

Add this to masqmail.conf:

    online_query = "/bin/echo default"

Now masqmail will send online mail automatically through the default
route, each time it does a queue run (every ten minutes).


In case of problems
-------------------

Like in simple-local-setup plus ...

If you use a wrapper, test it manually and interactively on the
command line.
