simple installation instructions, see docs/install.html for more.

To compile MasqMail you need glib 1.2 (http://www.gtk.org).

You need a user and a group for masqmail to run, I suggest user
'mail' and group 'trusted'. Say:

groupadd -g 42 trusted
useradd -u 42 -g 42 -d / -s /bin/sh -c "Mail Transfer Agent" mail

If you use other names than 'mail' and 'trusted' use the options
described below for configure. The 42 is just a suggestion, you can
use any number you like, but preferably one < 100. It does not have
to be the same for the user 'mail' and the group 'trusted'.

Then do:

./configure
make
make install

Debian:
If you compile for Debian, do the configure with at least these options, this makes it compatible with the official debian package:
./configure --with-liblockfile --with-group=mail --with-conffile=/etc/masqmail/masqmail.conf --with-logdir=/var/log/masqmail/
you do not need the group 'trusted', use 'mail' instead.


Sorry, but after that you are not yet finished. For instruction on how
to deliver mail using a connection to your ISP see
docs/install.html. It is probably a good idea to copy the files
docs/*.html to a directory where you can access them with a browser.

additional options for configure:
---------------------------------

--with-user=USER sets the user as which MasqMail will run. Default is
'mail'. USER has to exist before you 'make install'.

--with-group=GROUP sets the group as which MasqMail will run. Default
is 'trusted'. GROUP has to exist before you 'make install'.

--with-logdir=LOGDIR sets the directory where MasqMail stores its log
files. It will be created if it does not exist. Default is /var/masqmail/.

--with-spooldir=SPOOLDIR sets the directory where MasqMail stores its
spool files. It will be created if it does not exist. Default is
/var/spool/masqmail/.

--with-conffile=CONFFILE sets the default configuration file to
CONFFILE, in case you prefer another location than /etc/masqmail.conf

--enable-auth enables ESMTP AUTH support (disabled by default)

--disable-pop3 disables pop3 support (enabled by default)

--enable-ident enable RFC 1413 support. If you have the libident
dynamic library installed, this will be linked, otherwise it will be
statically linked using the sources included in the package.

after make install:
-------------------

You can also use these instructions to omit 'make install' if you do
not want to use it.

Check that 'make install' worked correctly. The following command:

ls -ld /usr/sbin/masqmail /var/masqmail/ /var/spool/masqmail /var/spool/masqmail/input

should give output similar to

-rwsr-xr-x   1 root     root        86955 Oct 14 14:27 /usr/sbin/masqmail
drwxr-xr-x   2 mail     trusted      1024 Oct 14 14:29 /var/masqmail/
drwxr-xr-x   3 mail     trusted      1024 Oct 14 14:27 /var/spool/masqmail
drwxr-xr-x   2 mail     trusted      1024 Oct 14 18:32 /var/spool/masqmail/input
drwxr-xr-x   2 mail     trusted      1024 Oct 14 18:32 /var/spool/masqmail/popuidl

(important is the set-user-id bit for /usr/sbin/masqmail and the
ownership of all items).

Use the example configuration files in examples/ to edit your own. The
main configuration should go to /etc/masqmail.conf. I recommend to
make a directory /etc/masqmail for the *.route amd *.get files.

The default destination for the executable 'masqmail' is
/usr/sbin. Check that it has the set user id bit set. (chmod u+s
/usr/sbin/masqmail does no harm in any case).

If you want to replace sendmail, move your old sendmail binary to
another name and make a symbolic link /usr/sbin/sendmail ->
/usr/sbin/masqmail.


